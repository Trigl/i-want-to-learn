类的生命周期分为：加载 -> 连接 -> 初始化 -> 使用 -> 卸载

## 加载
类的加载指的是将类的.class文件中的二进制数据读入到内存中，将其放在运行时数据区的方法区内，然后在堆区创建一个java.lang.Class对象。

类的加载是由JAVA类加载器完成。

## 连接Linking
1. 验证：当一个类被加载之后，必须要验证一下这个类是否合法，比如这个类是不是符合字节码的格式、变量与方法是不是有重复、数据类型是不是有效、继承与实现是否合乎标准等等。总之，这个阶段的目的就是保证加载的类是能够被jvm所运行。
2. 准备：准备阶段的工作就是为类的静态变量分配内存并设为jvm默认的初值，对于非静态的变量，则不会为它们分配内存。
3. 解析：这一阶段的任务就是把常量池中的符号引用转换为直接引用。

## 类的初始化
Java程序对类的使用方式可以分为两种：

1. 主动使用
2. 被动使用

只有当对类的主动使用的时候才会导致类的初始化，类的主动使用包括以下六种：

![](/resource/initial-class.png)

除了以上六种情况，其他使用Java类的方式都被看作是对类的被动使用，都不会导致类的初始化。

1. 父类静态代码块；
2. 子类静态代码块；
3. 父类构造函数；
4. 子类构造函数；

在类的初始化阶段，java虚拟机执行类的初始化语句，为类的静态变量赋值。

java类中对类变量指定初始值有两种方式：

1. 声明类变量时指定初始值
2. 使用静态初始化块为类变量指定初始值。
